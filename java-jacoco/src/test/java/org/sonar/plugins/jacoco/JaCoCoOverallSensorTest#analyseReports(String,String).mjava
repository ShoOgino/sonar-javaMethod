  private Resource analyseReports(String utReport, String itReport) throws IOException {
    File outputDir = TestUtils.getResource(JaCoCoOverallSensorTest.class, ".");
    File to = new File(outputDir, "HelloWorld.class");
    Files.copy(TestUtils.getResource("HelloWorld.class.toCopy"), to);
    org.sonar.api.resources.File resource = mock(org.sonar.api.resources.File.class);

    when(context.getResource(any(Resource.class))).thenReturn(resource);
    when(javaResourceLocator.findResourceByClassName("com/sonar/coverages/HelloWorld")).thenReturn(resource);
    when(configuration.getReportPath()).thenReturn(utReport);
    when(configuration.getItReportPath()).thenReturn(itReport);
    when(javaClasspath.getBinaryDirs()).thenReturn(ImmutableList.of(outputDir));
    when(pathResolver.relativeFile(any(File.class), eq(utReport))).thenReturn(new File(outputDir, utReport));
    when(pathResolver.relativeFile(any(File.class), eq(itReport))).thenReturn(new File(outputDir, itReport));
    when(pathResolver.relativeFile(any(File.class), eq(new File("target/sonar/jacoco-overall.exec").getAbsolutePath()))).thenReturn(new File("target/sonar/jacoco-overall.exec"));
    when(fileSystem.workingDir()).thenReturn(new File("target/sonar"));

    sensor.analyse(project, context);
    return resource;
  }

