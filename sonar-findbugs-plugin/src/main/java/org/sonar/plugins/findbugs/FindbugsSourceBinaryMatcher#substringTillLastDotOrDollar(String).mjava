  private String substringTillLastDotOrDollar(String s) {
    int lastDotIndex = StringUtils.lastIndexOf(s, '.');
    int lastDollarIndex = StringUtils.lastIndexOf(s, '$');

    int trimToIndex;
    if (lastDotIndex != -1 && lastDollarIndex != -1) {
      trimToIndex = Math.min(lastDotIndex, lastDollarIndex);
    } else {
      trimToIndex = Math.max(lastDotIndex, lastDollarIndex);
    }

    return trimToIndex == -1 ? s : s.substring(0, trimToIndex);
  }

