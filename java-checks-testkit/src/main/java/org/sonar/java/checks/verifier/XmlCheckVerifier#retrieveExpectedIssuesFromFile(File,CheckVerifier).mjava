  /**
   * Read the XML file using javax XMLStreamReader instead of SAX (used by {@link XmlParser}),
   * as SAX does not provide any  way to retrieve lines information of comments events.
   *
   * @param xmlFile
   * @param checkVerifier
   */
  protected static void retrieveExpectedIssuesFromFile(File xmlFile, CheckVerifier checkVerifier) {
    XMLInputFactory factory = XMLInputFactory.newInstance();

    // disable DTD validation, in order to avoid query any external URL
    factory.setProperty(XMLInputFactory.SUPPORT_DTD, false);

    try (FileInputStream is = new FileInputStream(xmlFile)) {
      XMLStreamReader reader = factory.createXMLStreamReader(is);
      while (reader.hasNext()) {
        int line = reader.getLocation().getLineNumber();
        reader.next();
        if (reader.getEventType() == XMLStreamReader.COMMENT) {
          String text = reader.getText().trim();
          checkVerifier.collectExpectedIssues(text, line);
        }
      }
    } catch (XMLStreamException | IOException e) {
      Fail.fail("The test file can not be parsed to retrieve comments", e);
    }
  }

