  private void assertMultipleIssue(SourceCode sourceCode) throws AssertionError {
    Preconditions.checkState(sourceCode.hasCheckMessages(), "At least one issue expected");
    List<Integer> unexpectedLines = Lists.newLinkedList();
    for (CheckMessage checkMessage : sourceCode.getCheckMessages()) {
      validateIssue(unexpectedLines, checkMessage);
    }
    if (!expected.isEmpty() || !unexpectedLines.isEmpty()) {
      Collections.sort(unexpectedLines);
      String expectedMsg = !expected.isEmpty() ? ("Expected " + expected) : "";
      String unexpectedMsg = !unexpectedLines.isEmpty() ? ((expectedMsg.isEmpty() ? "" : ", ") + "Unexpected at " + unexpectedLines) : "";
      Fail.fail(expectedMsg + unexpectedMsg);
    }
  }

