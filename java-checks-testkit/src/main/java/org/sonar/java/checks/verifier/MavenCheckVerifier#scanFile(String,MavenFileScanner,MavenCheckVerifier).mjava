  private static void scanFile(String filename, MavenFileScanner check, MavenCheckVerifier mavenCheckVerifier) {
    File pom = new File(filename);
    MavenProject project = MavenParser.parseXML(pom);
    if (project != null) {
      retrieveExpectedIssuesFromFile(pom, mavenCheckVerifier);
      FakeMavenFileScannerContext context = new FakeMavenFileScannerContext(pom, project);
      check.scanFile(context);
      mavenCheckVerifier.checkIssues(context.messages, false);
    } else {
      Fail.fail("The test file can not be parsed");
    }
  }

