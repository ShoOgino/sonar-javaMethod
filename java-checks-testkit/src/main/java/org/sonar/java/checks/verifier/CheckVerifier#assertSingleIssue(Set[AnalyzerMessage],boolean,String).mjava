  private static void assertSingleIssue(Set<AnalyzerMessage> issues, boolean issueOnFile, String expectedMessage) {
    Preconditions.checkState(issues.size() == 1, "A single issue is expected on the file");
    AnalyzerMessage issue = Iterables.getFirst(issues, null);
    assertThat(!issue.getFile().isDirectory()).isEqualTo(issueOnFile);
    assertThat(issue.getLine()).isNull();
    assertThat(issue.getMessage()).isEqualTo(expectedMessage);
  }

