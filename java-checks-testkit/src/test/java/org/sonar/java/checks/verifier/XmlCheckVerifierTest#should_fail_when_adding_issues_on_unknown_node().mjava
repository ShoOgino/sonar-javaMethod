  @Test
  public void should_fail_when_adding_issues_on_unknown_node() {
    try {
      XmlCheckVerifier.verify(XML_WITH_ISSUES, new TestXmlCheck() {
        @Override
        public void scanFile(XmlCheckContext context) {
          try {
            Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(context.getFile());
            Node node = ((NodeList) XPathFactory.newInstance().newXPath().compile("//test2").evaluate(doc, XPathConstants.NODESET)).item(0);
            context.reportIssue(this, node, "Message1");
          } catch (ParserConfigurationException | SAXException | IOException | XPathExpressionException e) {
            Fail.fail("");
          }
        }
      });
    } catch (AssertionError e) {
      assertThat(e).hasMessage("The provided node does not have line attribute 'start_column'");
    }
  }

