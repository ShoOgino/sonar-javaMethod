  @Test
  public void should_detect_issues_using_secondaries() {
    XmlCheckVerifier.verify(XML_WITH_SECONDARIES, new TestXmlCheck() {
      @Override
      public void scanFile(XmlCheckContext context) {
        try {
          context.reportIssue(
            this,
            firstNode(context, "//test2"),
            "Message1",
            Lists.newArrayList(new XmlCheckContext.XmlDocumentLocation("Message2", firstNode(context, "//test4"))));
        } catch (Exception e) {
          Fail.fail();
        }
      }
    });
  }

