  @Test
  public void should_detect_issues() {
    XmlCheckVerifier.verify(XML_WITH_ISSUES, new TestXmlCheck() {
      @Override
      public void scanFile(XmlCheckContext context) {
        fakeContext = context;
        context.reportIssue(this, 2, "message1");
        context.reportIssue(this, 4, "message2");
      }
    });
    assertThat(((FakeXmlCheckContext) fakeContext).getMessages()).hasSize(2);
  }

