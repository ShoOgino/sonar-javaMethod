  @Test
  public void exportParameters() throws IOException, SAXException {
    RulesProfile profile = RulesProfile.create("sonar way", "java");
    Rule rule = Rule.create("checkstyle", "com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocPackageCheck", "Javadoc")
        .setConfigKey("Checker/JavadocPackage");
    rule.createParameter("format");
    rule.createParameter("message"); // not set in the profile and no default value => not exported in checkstyle
    rule.createParameter("ignore");

    profile.activateRule(rule, RulePriority.MAJOR)
        .setParameter("format", "abcde");

    StringWriter writer = new StringWriter();
    new CheckstyleProfileExporter().exportProfile(profile, writer);

    TestUtils.assertSimilarXml(
        TestUtils.getResourceContent("/org/sonar/plugins/checkstyle/CheckstyleProfileExporterTest/exportParameters.xml"),
        sanitizeForTests(writer.toString()));
  }

