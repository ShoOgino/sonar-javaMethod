  @Test
  public void should_fail_to_dump_xml_rule_set() throws IOException {
    when(fs.writeToWorkingDirectory("<xml>", "pmd.xml")).thenThrow(new IOException("BUG"));

    expectedException.expect(SonarException.class);
    expectedException.expectMessage("Fail to save the PMD configuration");

    configuration.dumpXmlRuleSet("pmd", "<xml>");
  }

