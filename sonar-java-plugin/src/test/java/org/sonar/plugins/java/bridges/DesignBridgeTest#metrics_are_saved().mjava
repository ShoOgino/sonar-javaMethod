  @Test
  public void metrics_are_saved() throws Exception {
    SensorContext context = mock(SensorContext.class);
    DirectedGraph<Resource, Dependency> graph = mock(DirectedGraph.class);
    ResourceMapping resourceMapping = mock(ResourceMapping.class);
    ResourcePerspectives resourcePerspectives = mock(ResourcePerspectives.class);
    DesignBridge bridge = new DesignBridge(context, graph, resourceMapping, resourcePerspectives);
    bridge.saveDesign(mock(Project.class));
    verify(context, times(4)).saveMeasure(any(Resource.class), any(Metric.class), anyDouble());

  }

