  @Test
  public void testHandleAnalysisCancellation() throws Exception {
    CheckFactory checkFactory = new CheckFactory(new ActiveRulesBuilder().build());
    XmlFileSensor sensor = new XmlFileSensor(checkFactory);

    context.setCancelled(true);

    addFileWithIssue("xml");
    sensor.execute(context);

    assertThat(context.allIssues()).isEmpty();
  }

