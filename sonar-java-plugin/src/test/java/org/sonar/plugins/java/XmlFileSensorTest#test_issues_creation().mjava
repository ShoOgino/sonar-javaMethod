  @Test
  public void test_issues_creation() throws Exception {
    SensorContextTester context = SensorContextTester.create(new File("src/test/files/maven/"));
    DefaultFileSystem fs = context.fileSystem();
    final File file = new File("src/test/files/maven/pom.xml");
    fs.add(new DefaultInputFile("", "pom.xml"));
    SonarComponents sonarComponents = createSonarComponentsMock(fs);
    XmlFileSensor sensor = new XmlFileSensor(sonarComponents, fs);

    sensor.execute(context);

    verify(sonarComponents, times(1)).reportIssue(Mockito.argThat(new ArgumentMatcher<AnalyzerMessage>() {
      @Override
      public boolean matches(Object argument) {
        return file.getAbsolutePath().equals(((AnalyzerMessage) argument).getFile().getAbsolutePath());
      }
    }));
  }

