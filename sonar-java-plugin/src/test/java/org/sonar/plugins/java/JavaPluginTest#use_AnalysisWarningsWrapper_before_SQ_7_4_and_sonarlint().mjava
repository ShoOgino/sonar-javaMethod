  @Test
  public void use_AnalysisWarningsWrapper_before_SQ_7_4_and_sonarlint() {
    Version unsupportedVersion = Version.create(7, 3);
    Version minSupportedVersion = Version.create(7, 4);

    SonarRuntime runtime = SonarRuntimeImpl.forSonarQube(unsupportedVersion, SonarQubeSide.SCANNER);
    Plugin.Context context = new Plugin.Context(runtime);
    javaPlugin.define(context);
    assertThat(context.getExtensions()).doesNotContain(AnalysisWarningsWrapper.class);

    runtime = SonarRuntimeImpl.forSonarQube(minSupportedVersion, SonarQubeSide.SCANNER);
    context = new Plugin.Context(runtime);
    javaPlugin.define(context);
    assertThat(context.getExtensions()).contains(AnalysisWarningsWrapper.class);

    runtime = SonarRuntimeImpl.forSonarLint(minSupportedVersion);
    context = new Plugin.Context(runtime);
    javaPlugin.define(context);
    assertThat(context.getExtensions()).doesNotContain(AnalysisWarningsWrapper.class);
  }

