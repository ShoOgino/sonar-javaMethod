  @Test
  public void perform() throws IOException {
    ORCHESTRATOR.getServer().provisionProject("project", "project");
    ORCHESTRATOR.getServer().associateProjectToQualityProfile("project", "java", "no-rules");
    SonarScanner build = SonarScanner.create(FileLocation.of("../sources/jdk6").getFile())
      .setEnvironmentVariable("SONAR_RUNNER_OPTS", "-Xmx1024m -server")
      .setProperty("sonar.importSources", "false")
      // Dummy sonar.java.binaries to pass validation
      .setProperty("sonar.java.binaries", "launcher")
      .setProperty("sonar.showProfiling", "true")
      .setProperty("sonar.preloadFileMetadata", "true")
      .setProjectKey("project")
      .setProjectName("project")
      .setProjectVersion("1")
      .setSourceEncoding("UTF-8")
      .setSourceDirs(".");

    BuildResult result = ORCHESTRATOR.executeBuild(build);

    double time = sensorTime(build.getProjectDir(), result.getLogs(), SENSOR_NAME);

    double expected = 170;
    assertThat(time).isEqualTo(expected, offset(expected * 0.04));
  }

