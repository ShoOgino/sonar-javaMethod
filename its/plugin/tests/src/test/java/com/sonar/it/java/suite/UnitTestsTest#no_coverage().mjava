  @Test
  public void no_coverage() {
    MavenBuild build = MavenBuild.create()
      .setPom(TestUtils.projectPom("no_coverage"))
      .setGoals("clean test-compile surefire:test", "sonar:sonar")
      .setProperty("sonar.jacoco.reportMissing.force.zero", "true");
    BuildResult buildResult = orchestrator.executeBuild(build);

    assertThat(buildResult.getLogs())
      .contains("JaCoCoSensor: JaCoCo report not found.")
      .contains("Project coverage is set to 0% as no JaCoCo execution data has been dumped: ");

    Resource project = orchestrator.getServer().getWsClient().find(ResourceQuery.createForMetrics("test:no_coverage",
      "tests", "coverage"));

    assertThat(project.getMeasure("tests").getIntValue()).isEqualTo(1);
    assertThat(project.getMeasure("coverage").getIntValue()).isEqualTo(0);
  }

