  @Test
  public void unit_test_metrics() {
    setCurrentProject();
    int linesToCover = 15498;
    if(JavaTestSuite.sonarqube_version_is_prior_to_6_2()) {
      linesToCover = 15474;
    }
    assertThat(getProjectMeasure("lines_to_cover").getValue()).isEqualTo(linesToCover, offset(10.0));
    assertThat(getProjectMeasure("coverage").getValue()).isEqualTo(25.1, offset(0.1));
    assertThat(getCoreModuleMeasure("coverage").getValue()).isEqualTo(36.8, offset(0.2));
    assertThat(getProjectMeasure("line_coverage").getValue()).isEqualTo(25.5);
    assertThat(getProjectMeasure("branch_coverage").getValue()).isEqualTo(24.1);
    if(JavaTestSuite.sonarqube_version_is_prior_to_6_2()) {
      // overall coverage is the same as UT if no IT.
      assertThat(getCoreModuleMeasure("overall_coverage").getValue()).isEqualTo(36.8, offset(0.2));
      assertThat(getProjectMeasure("overall_coverage").getValue()).isEqualTo(25.1, offset(0.1));
      assertThat(getProjectMeasure("overall_line_coverage").getValue()).isEqualTo(25.5);
      assertThat(getProjectMeasure("overall_branch_coverage").getValue()).isEqualTo(24.1);
    }
    assertThat(getProjectMeasure("tests").getIntValue()).isEqualTo(307);
    assertThat(getProjectMeasure("test_execution_time").getIntValue()).isGreaterThan(200);
    assertThat(getProjectMeasure("test_errors").getIntValue()).isEqualTo(0);
    assertThat(getProjectMeasure("test_failures").getIntValue()).isEqualTo(0);
    assertThat(getProjectMeasure("skipped_tests").getIntValue()).isEqualTo(0);
    assertThat(getProjectMeasure("test_success_density").getValue()).isEqualTo(100.0);
  }

