  @Test
  public void test_if_merge() {
    ExecutionState falseState = new ExecutionState();
    ExecutionState trueState = new ExecutionState();
    ExecutionState unknownState = new ExecutionState();

    StatementTree blockingIfTree = analyzeStatement("{ local1 = true; if(local1) { return; } }");
    List<ExecutionState> blockingResult = new SymbolicEvaluator().evaluateStatement(ImmutableList.of(unknownState), blockingIfTree);
    assertThat(blockingResult).isEmpty();

    StatementTree ifTree = analyzeStatement("if(local1) { local2 = true; } else { local2 = false; }");
    falseState.setBooleanConstraint(local1Symbol(), FALSE);
    trueState.setBooleanConstraint(local1Symbol(), TRUE);
    unknownState.setBooleanConstraint(local1Symbol(), UNKNOWN);
    List<ExecutionState> result = new SymbolicEvaluator().evaluateStatement(ImmutableList.of(falseState, trueState, unknownState), ifTree);
    assertThat(result).containsOnly(falseState, trueState, unknownState);
    assertThat(falseState.getBooleanConstraint(local1Symbol())).isSameAs(FALSE);
    assertThat(trueState.getBooleanConstraint(local1Symbol())).isSameAs(TRUE);
    assertThat(unknownState.getBooleanConstraint(local1Symbol())).isSameAs(UNKNOWN);
    assertThat(falseState.getBooleanConstraint(local2Symbol())).isSameAs(FALSE);
    assertThat(trueState.getBooleanConstraint(local2Symbol())).isSameAs(TRUE);
    assertThat(unknownState.getBooleanConstraint(local2Symbol())).isSameAs(UNKNOWN);
  }

