  @Test
  public void parsePartially() {
    Parser<MyGrammar> p = getParser();
    MyGrammar g = p.getGrammar();
    List<Token> tokens = getLexer().lex("foo");
    tokens = tokens.subList(0, tokens.size() - 1); // Remove EOF

    PartialParser partialParser = new PartialParser(p);
    p.setRootRule(g.foo);
    assertThat(partialParser.parsePartially(tokens)).isEqualTo(PartialParser.PartialParseResult.MISMATCH);
    p.setRootRule(g.bar);
    assertThat(partialParser.parsePartially(tokens)).isEqualTo(PartialParser.PartialParseResult.FULL_MATCH);
    p.setRootRule(g.baz);
    assertThat(partialParser.parsePartially(tokens)).isEqualTo(PartialParser.PartialParseResult.PARTIAL_MATCH);
  }

