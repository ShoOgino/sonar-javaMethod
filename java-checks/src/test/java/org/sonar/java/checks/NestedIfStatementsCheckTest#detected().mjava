  @Test
  public void detected() {
    NestedIfStatementsCheck check = new NestedIfStatementsCheck();
    assertThat(check.max).isEqualTo(3);

    SourceFile file = JavaAstScanner.scanSingleFile(new File("src/test/files/checks/NestedIfStatementsCheck.java"), new VisitorsBridge(check));
    checkMessagesVerifier.verify(file.getCheckMessages())
      .next().atLine(19).withMessage("Refactor this code to not nest more than 3 if/for/while/switch statements.")
      .next().atLine(41)
      .next().atLine(47)
      .next().atLine(57)
      .next().atLine(60)
      .next().atLine(63)
      .next().atLine(66)
      .next().atLine(69)
      .next().atLine(72);
  }

