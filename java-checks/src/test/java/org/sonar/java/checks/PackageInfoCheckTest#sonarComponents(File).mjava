  static SonarComponents sonarComponents(File file) throws IOException {
    File moduleBaseDir = new File("");
    SensorContextTester context = SensorContextTester.create(moduleBaseDir);
    context.fileSystem().setWorkDir(moduleBaseDir.toPath());
    SonarComponents sonarComponents = new SonarComponents(null, context.fileSystem(), null, null, null);
    sonarComponents.setSensorContext(context);

    DefaultInputFile inputFile = new TestInputFileBuilder("", moduleBaseDir, file).setCharset(StandardCharsets.UTF_8)
      .setContents(new String(Files.readAllBytes(file.toPath()))).build();
    context.fileSystem().add(inputFile);
    return sonarComponents;
  }

