  @Test
  public void test() {
    SonarComponents sonarComponents = mock(SonarComponents.class);
    when(sonarComponents.isSQGreaterThan62()).thenReturn(false);
    when(sonarComponents.fileContent(any())).thenCallRealMethod();
    when(sonarComponents.fileLength(any())).thenCallRealMethod();

    VisitorsBridgeForTests visitorsBridge = new VisitorsBridgeForTests(new ParsingErrorCheck(), sonarComponents);
    JavaAstScanner.scanSingleFileForTests(new File("src/test/files/checks/ParsingError.java"), visitorsBridge);
    Set<AnalyzerMessage> issues = visitorsBridge.lastCreatedTestContext().getIssues();
    assertThat(issues).hasSize(1);
    AnalyzerMessage issue = issues.iterator().next();
    assertThat(issue.getLine()).isEqualTo(1);
    assertThat(issue.getMessage()).isEqualTo("Parse error");
  }

