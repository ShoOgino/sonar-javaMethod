  @Test
  public void getNextCommonPatternMatcherComparator() {
    Comparator<Token> comparator = mock(Comparator.class);

    CommonPatternMatcher nextCommonPatternMatcher = mock(CommonPatternMatcher.class);
    when(nextCommonPatternMatcher.getComparator()).thenReturn(comparator);

    Rule rule = mock(Rule.class);
    assertThat(new VaryingPatternMatcher(mock(PrefixParser.class), ImmutableSet.of(rule), nextCommonPatternMatcher).getNextCommonPatternMatcherComparator()).isEqualTo(comparator);
  }

