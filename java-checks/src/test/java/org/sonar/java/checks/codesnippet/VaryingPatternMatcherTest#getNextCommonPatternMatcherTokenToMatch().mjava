  @Test
  public void getNextCommonPatternMatcherTokenToMatch() {
    Token token1 = mockToken("token1");
    Token token2 = mockToken("token2");

    CommonPatternMatcher nextCommonPatternMatcher = mock(CommonPatternMatcher.class);
    when(nextCommonPatternMatcher.getTokensToMatch()).thenReturn(Lists.newArrayList(token1, token2));

    Rule rule = mock(Rule.class);
    assertThat(new VaryingPatternMatcher(mock(PrefixParser.class), ImmutableSet.of(rule), nextCommonPatternMatcher).getNextCommonPatternMatcherTokenToMatch()).isEqualTo(token1);
  }

