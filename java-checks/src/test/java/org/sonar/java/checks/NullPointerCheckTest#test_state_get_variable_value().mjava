  @Test
  public void test_state_get_variable_value() {
    VariableSymbol variable = mock(VariableSymbol.class);

    State parentState = new State();
    State currentState = new State(parentState);

    // undefined variable must be unknown
    assertThat(parentState.getVariableValue(variable)).isSameAs(UNKNOWN);

    // variable defined in parent must be visible in current.
    parentState.setVariableValue(variable, NOTNULL);
    assertThat(parentState.getVariableValue(variable)).isSameAs(NOTNULL);
    assertThat(currentState.getVariableValue(variable)).isSameAs(NOTNULL);

    // variable redefined in current must not affect value in parent.
    currentState.setVariableValue(variable, NULL);
    assertThat(parentState.getVariableValue(variable)).isSameAs(NOTNULL);
    assertThat(currentState.getVariableValue(variable)).isSameAs(NULL);
  }

