  @Test
  public void getMatchingRules() {
    Parser<MyGrammar> p = getParser();
    MyGrammar g = p.getGrammar();
    PrefixParser prefixParser = new PrefixParser(p);

    assertThat(new Classifier(prefixParser, Sets.newHashSet(g.foo)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla")))).containsOnly(g.foo);
    assertThat(new Classifier(prefixParser, Sets.newHashSet(g.foo)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla", "bar")))).containsOnly(g.foo);
    assertThat(new Classifier(prefixParser, Sets.newHashSet(g.foo, g.bar)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla")))).containsOnly(g.foo, g.bar);
    assertThat(new Classifier(prefixParser, Sets.newHashSet(g.foo, g.bar, g.baz)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla")))).containsOnly(g.foo, g.bar);
    assertThat(new Classifier(prefixParser, Sets.newHashSet(g.foo, g.baz)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla bla")))).containsOnly(g.baz);
    assertThat(new Classifier(prefixParser, Sets.newHashSet(g.foo, g.baz)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla", "bla bla")))).containsOnly(g.foo, g.baz);
  }

