  @Test
  public void getMatchingRules() {
    Parser<MyGrammar> p = getParser();
    MyGrammar g = p.getGrammar();

    assertThat(new Classifier(p, Collections.EMPTY_SET).getMatchingRules(getInputsTokens(Lists.newArrayList("foo")))).containsOnly();
    assertThat(new Classifier(p, Sets.newHashSet(g.foo)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla")))).containsOnly(g.foo);
    assertThat(new Classifier(p, Sets.newHashSet(g.foo, g.bar)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla")))).containsOnly(g.foo, g.bar);
    assertThat(new Classifier(p, Sets.newHashSet(g.foo, g.bar, g.baz)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla")))).containsOnly(g.foo, g.bar);
    assertThat(new Classifier(p, Sets.newHashSet(g.foo)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla", " ")))).containsOnly();
    assertThat(new Classifier(p, Sets.newHashSet(g.foo, g.baz)).getMatchingRules(getInputsTokens(Lists.newArrayList("bla bla")))).containsOnly(g.baz);
  }

