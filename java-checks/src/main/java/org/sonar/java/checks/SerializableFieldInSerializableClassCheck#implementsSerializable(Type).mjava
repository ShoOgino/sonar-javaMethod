  private boolean implementsSerializable(@Nullable Type type) {
    if (type == null || type.isUnknown()) {
      return false;
    }
    if (type.isPrimitive()) {
      return true;
    }
    if (type.isArray()) {
      return implementsSerializable(((Type.ArrayType) type).elementType());
    }
    if (type.isClass() || ((JavaType) type).isTagged(JavaType.TYPEVAR)) {
      return type.erasure().isSubtypeOf("java.io.Serializable");
    }
    return false;
  }

