  private static Token getPreviousToken(AstNode node) {
    AstNode result = node.getPreviousAstNode();

    while (result != null && !result.hasToken()) {
      while (result != null && !result.hasToken()) {
        result = result.getPreviousAstNode();
      }

      while (result != null && result.getLastChild() != null) {
        result = result.getLastChild();
      }
    }

    return result == null ? null : result.getToken();
  }

