  private static Optional<Integer> len(ExpressionTree tree) {
    if (tree.is(Kind.METHOD_INVOCATION)) {
      MethodInvocationTree invocation = (MethodInvocationTree) tree;
      if (STRING_LENGTH.matches(invocation)) {
        if (!invocation.methodSelect().is(Kind.MEMBER_SELECT)) {
          return Optional.empty();
        }
        tree = ((MemberSelectExpressionTree) invocation.methodSelect()).expression();
      }
    }
    return str(tree).map(String::length);
  }

