  private static Token getNextToken(AstNode node) {
    AstNode result = node.getNextAstNode();

    while (result != null && !result.hasToken()) {
      while (result != null && !result.hasToken()) {
        result = result.getNextAstNode();
      }

      while (result.getFirstChild() != null) {
        result = result.getFirstChild();
      }
    }

    return result == null ? null : result.getToken();
  }

