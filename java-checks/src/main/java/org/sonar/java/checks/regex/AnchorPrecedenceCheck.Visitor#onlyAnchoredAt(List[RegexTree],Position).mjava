    private boolean onlyAnchoredAt(List<RegexTree> alternatives, Position position) {
      int itemIndex = position == Position.BEGINNING ? 0 : (alternatives.size() - 1);
      int othersStartIndex = position == Position.BEGINNING ? 1 : 0;
      int othersEndOffset = position == Position.BEGINNING ? 0 : 1;
      RegexTree firstOrLast = alternatives.get(itemIndex);
      List<RegexTree> others = alternatives.subList(othersStartIndex, alternatives.size() - othersEndOffset);
      return isAnchored(firstOrLast, position) && others.stream().noneMatch(alt -> isAnchored(alt, position));
    }

