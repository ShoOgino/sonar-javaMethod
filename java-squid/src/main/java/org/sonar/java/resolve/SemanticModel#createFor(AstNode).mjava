  private static SemanticModel createFor(AstNode astNode) {
    SemanticModel semanticModel = new SemanticModel();
    Resolve resolve = new Resolve();
    Symbols symbols = new Symbols();
    visit(astNode, new FirstPass(semanticModel, resolve));
    visit(astNode, new ExpressionVisitor(semanticModel, symbols, resolve));
    return semanticModel;
  }

