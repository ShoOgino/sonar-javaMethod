  public static SemanticModel createFor(CompilationUnitTree tree) {
    Symbols symbols = new Symbols();
    Resolve resolve = new Resolve(symbols);
    SemanticModel semanticModel = createFor(((JavaTree.CompilationUnitTreeImpl) tree).getAstNode(), resolve);
    new ExpressionVisitor(semanticModel, symbols, resolve).visitCompilationUnit(tree);
    new LabelsVisitor(semanticModel).visitCompilationUnit(tree);
    return semanticModel;
  }

