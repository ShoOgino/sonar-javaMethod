  @Override
  public AnnotationVisitor visitArray(final String name) {
    final List<Object> valuesList = Lists.newArrayList();
    //TODO handle arrays of annotation and arrays of enum values.
    return new AnnotationVisitor(Opcodes.ASM5, this) {
      @Override
      public void visit(String name, Object value) {
        valuesList.add(value);
      }

      @Override
      public void visitEnd() {
        addValue(name, valuesList.toArray());
      }
    };
  }

