  @Before
  public void setUp() throws Exception {
    JavaConfiguration conf = new JavaConfiguration(Charsets.UTF_8);
    context = mock(SensorContext.class);
    Project sonarProject = mock(Project.class);
    ProjectFileSystem pfs = mock(ProjectFileSystem.class);
    baseDir = new File("src/test/files/metrics");
    when(sonarProject.getFileSystem()).thenReturn(pfs);
    when(pfs.getBasedir()).thenReturn(baseDir);
    measurer = new Measurer(sonarProject, context);
    squid = new JavaSquid(conf, null, measurer, new CodeVisitor[0]);
  }

