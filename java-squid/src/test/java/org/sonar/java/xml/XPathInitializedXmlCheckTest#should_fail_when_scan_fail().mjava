  @Test()
  public void should_fail_when_scan_fail() throws Exception {
    XmlCheck check = new XPathInitializedXmlCheck() {
      @Override
      public void initXPathExpressions(XmlCheckContext context) throws XPathExpressionException {
      }

      @Override
      public void scanFileWithXPathExpressions(XmlCheckContext context) throws XPathExpressionException {
        throw new XPathExpressionException("");
      }
    };

    thrown.expect(AnalysisException.class);
    thrown.expectMessage("Unable perform analysis on file 'path'");

    check.scanFile(context);
  }

