  @Test
  public void rethrow_exception_when_error_during_analysis() throws Exception {
    String className = "com.pack.MyClass";
    JavaResourceLocator javaResourceLocator = null;
    SquidIndex squidIndex = null;
    AsmClassProvider asmProvider = mock(AsmClassProvider.class);
    AsmClass asmClass = mock(AsmClass.class);
    when(asmProvider.getClass(anyString(), any(AsmClassProvider.DETAIL_LEVEL.class))).thenReturn(asmClass);
    BytecodeScanner bytecodeScanner = new BytecodeScanner(squidIndex, javaResourceLocator);
    bytecodeScanner.accept(new Visitor());
    thrown.expectMessage("Unable to analyze .class file com.pack.MyClass");
    bytecodeScanner.scanClasses(Lists.newArrayList(className), asmProvider);

  }

