  @Test
  public void noSonarLines() throws Exception {
    File file = new File("src/test/files/metrics/NoSonar.java");
    Resource resource = mock(Resource.class);
    when(resource.getEffectiveKey()).thenReturn(file.getAbsolutePath());
    when(context.getResource(any(InputPath.class))).thenReturn(resource);
    NoSonarFilter noSonarFilter = mock(NoSonarFilter.class);
    JavaAstScanner.scanSingleFileForTests(file, new VisitorsBridge(new Measurer(fs, context, false, noSonarFilter)));
    verify(noSonarFilter).addComponent(file.getAbsolutePath(), ImmutableSet.of(8));
  }

