  @Test
  public void annotations() {
    AstNode astNode = p.parse("@SuppressWarnings(\"unchecked\") class T { }");
    ClassTree tree = (ClassTree) ((CompilationUnitTree) astNode).types().get(0);
    List<AnnotationTree> annotations = tree.modifiers().annotations();
    assertThat(annotations).hasSize(1);
    AnnotationTree annotation = annotations.get(0);
    assertThat(annotation.annotationType().is(Tree.Kind.IDENTIFIER)).isTrue();
    assertThat(annotation.openParenToken()).isNotNull();
    assertThat(annotation.arguments()).hasSize(1);
    assertThat(annotation.arguments().get(0).is(Tree.Kind.STRING_LITERAL)).isTrue();
    assertThat(annotation.closeParenToken()).isNotNull();
    assertThat(annotation.atToken()).isNotNull();

    astNode = p.parse("@Target( ) class U {}");
    tree = (ClassTree) ((CompilationUnitTree) astNode).types().get(0);
    annotations = tree.modifiers().annotations();
    assertThat(annotations).hasSize(1);
    annotation = annotations.get(0);
    assertThat(annotation.openParenToken()).isNotNull();
    assertThat(annotation.arguments()).hasSize(0);
    assertThat(annotation.closeParenToken()).isNotNull();
    assertThat(annotation.atToken()).isNotNull();

    astNode = p.parse("@Target({ElementType.METHOD}) class U {}");
    tree = (ClassTree) ((CompilationUnitTree) astNode).types().get(0);
    annotations = tree.modifiers().annotations();
    assertThat(annotations).hasSize(1);
    annotation = annotations.get(0);
    assertThat(annotation.openParenToken()).isNotNull();
    assertThat(annotation.arguments()).hasSize(1);
    assertThat(annotation.arguments().get(0).is(Tree.Kind.NEW_ARRAY)).isTrue();
    assertThat(annotation.closeParenToken()).isNotNull();
    assertThat(annotation.atToken()).isNotNull();

    astNode = p.parse("@Target(value={ElementType.METHOD}, value2=\"toto\") class T { }");
    tree = (ClassTree) ((CompilationUnitTree) astNode).types().get(0);
    annotations = tree.modifiers().annotations();
    assertThat(annotations).hasSize(1);
    annotation = annotations.get(0);
    assertThat(annotation.annotationType().is(Tree.Kind.IDENTIFIER)).isTrue();
    assertThat(annotation.openParenToken()).isNotNull();
    assertThat(annotation.arguments()).hasSize(2);
    assertThat(annotation.arguments().get(0).is(Tree.Kind.ASSIGNMENT)).isTrue();
    assertThat(annotation.closeParenToken()).isNotNull();
    assertThat(annotation.atToken()).isNotNull();

    astNode = p.parse("class T { private void meth() { @NonNullable String str;}}");
    tree = (ClassTree) ((CompilationUnitTree) astNode).types().get(0);
    VariableTree variable = (VariableTree) ((MethodTree) tree.members().get(0)).block().body().get(0);
    annotations = variable.modifiers().annotations();
    assertThat(annotations).hasSize(1);
    annotation = annotations.get(0);
    assertThat(annotation.annotationType().is(Tree.Kind.IDENTIFIER)).isTrue();
    assertThat(annotation.atToken()).isNotNull();
    assertThat(annotation.openParenToken()).isNull();
    assertThat(annotation.closeParenToken()).isNull();

    astNode = p.parse("@PackageLevelAnnotation package blammy;");
    annotations = ((CompilationUnitTree) astNode).packageAnnotations();
    assertThat(annotations).hasSize(1);
    assertThat(annotations.get(0).atToken()).isNotNull();
    assertThat(annotation.openParenToken()).isNull();
    assertThat(annotation.closeParenToken()).isNull();
  }

