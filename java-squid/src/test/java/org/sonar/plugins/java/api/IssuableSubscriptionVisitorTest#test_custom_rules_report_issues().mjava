  @Test
  public void test_custom_rules_report_issues() throws Exception {

    JavaSquid javaSquid = new JavaSquid(new JavaConfiguration(Charsets.UTF_8), Mockito.mock(JavaResourceLocator.class), new CustomRule());
    javaSquid.scan(Lists.newArrayList(new File("src/test/resources/IssuableSubscriptionClass.java")), Lists.<File>newArrayList(), Lists.<File>newArrayList());
    Collection<SourceCode> sourceCodes = javaSquid.search(new QueryByType(SourceFile.class));
    assertThat(sourceCodes).hasSize(1);
    SourceCode sourceCode = sourceCodes.iterator().next();
    assertThat(sourceCode.getCheckMessages()).hasSize(6);
  }

