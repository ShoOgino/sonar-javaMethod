  private void checkLines(String filename, FileLinesContext context) {
    SonarComponents sonarComponents = mock(SonarComponents.class);
    when(sonarComponents.fileLinesContextFor(Mockito.any(File.class))).thenReturn(context);

    JavaSquid squid = new JavaSquid(conf, null, null, null, null, new CodeVisitor[] {new FileLinesVisitor(sonarComponents, conf.getCharset())});
    squid.scan(Lists.newArrayList(new File(baseDir, filename)), Collections.<File>emptyList());
  }

