  @Test
  public void test_signature() throws Exception {
    JavaAstScanner.scanSingleFileForTests(
      new File("src/test/java/org/sonar/java/resolve/targets/MethodCompleteSignature.java"),
      new VisitorsBridge(Collections.singleton(new SubscriptionVisitor() {
        @Override
        public List<Tree.Kind> nodesToVisit() {
          return Lists.newArrayList(Tree.Kind.METHOD_INVOCATION);
        }

        @Override
        public void visitNode(Tree tree) {
          Symbol.MethodSymbol methodSymbol = (Symbol.MethodSymbol) ((MethodInvocationTree) tree).symbol();
          if(methodSymbol.name().equals("test")) {
            assertThat(methodSymbol.signature())
              .isEqualTo("org.sonar.java.resolve.targets.MethodCompleteSignature#test(SJZI[BLjava/lang/Object;CFDLjava/lang/String;)V");
          } else {
            assertThat(methodSymbol.signature())
              .isEqualTo("org.sonar.java.resolve.targets.MethodCompleteSignature#test2([Lorg/sonar/java/resolve/targets/MethodCompleteSignature;)[Lorg/sonar/java/resolve/targets/MethodCompleteSignature;");
          }
        }

      }), Collections.singletonList(new File("target/test-classes")), null));
  }

