  @Test
  public void defaultMethods_should_be_correctly_flagged() throws Exception {
    Symbol.TypeSymbol clazz = bytecodeCompleter.getClassSymbol("org.sonar.java.resolve.targets.DefaultMethods");
    ((TypeJavaSymbol) clazz).complete();

    assertThat(((TypeJavaSymbol) clazz).flags() & Flags.INTERFACE).isNotZero();
    JavaSymbol.MethodJavaSymbol abstractMethod = (JavaSymbol.MethodJavaSymbol) ((TypeJavaSymbol) clazz).members().lookup("abstractMethod").get(0);
    assertThat(abstractMethod.flags() & Flags.ABSTRACT).isNotZero();
    assertThat(abstractMethod.flags() & Flags.DEFAULT).isZero();

    JavaSymbol.MethodJavaSymbol defaultMethod = (JavaSymbol.MethodJavaSymbol) ((TypeJavaSymbol) clazz).members().lookup("defaultMethod").get(0);
    assertThat(defaultMethod.flags() & Flags.ABSTRACT).isZero();
    assertThat(defaultMethod.flags() & Flags.DEFAULT).isNotZero();

    JavaSymbol.MethodJavaSymbol staticMethod = (JavaSymbol.MethodJavaSymbol) ((TypeJavaSymbol) clazz).members().lookup("staticMethod").get(0);
    assertThat(staticMethod.flags() & Flags.ABSTRACT).isZero();
    assertThat(staticMethod.flags() & Flags.DEFAULT).isZero();
    assertThat(staticMethod.flags() & Flags.STATIC).isNotZero();
  }

