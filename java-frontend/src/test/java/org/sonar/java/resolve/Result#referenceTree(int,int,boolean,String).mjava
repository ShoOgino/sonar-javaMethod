  private Object referenceTree(int line, int column, boolean searchSymbol, @Nullable String name) {
    // In SSLR column starts at 0, but here we want consistency with IDE, so we start from 1:
    column -= 1;
    for (Symbol symbol : symbolsUsed) {
      if (name != null && !name.equals(symbol.name())) {
        continue;
      }
      for (IdentifierTree usage : symbol.usages()) {
        SyntaxToken token = usage.identifierToken();
        if (token.line() == line && token.column() == column) {
          if(searchSymbol) {
            if (usage.parent() == null || !usage.parent().is(Tree.Kind.NEW_CLASS) || symbol.isMethodSymbol()) {
              return symbol;
            }
          } else {
            return usage;
          }
        }
      }
    }
    throw new IllegalArgumentException("Reference Tree not found "+line);
  }

