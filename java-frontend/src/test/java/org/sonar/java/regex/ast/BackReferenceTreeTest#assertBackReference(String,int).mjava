  private static void assertBackReference(String regex, int expectedGroupNumber) {
    RegexTree tree = assertSuccessfulParse(regex);
    assertThat(tree).isInstanceOf(BackReferenceTree.class);
    assertKind(RegexTree.Kind.BACK_REFERENCE, tree);
    assertThat(tree.incomingTransitionType()).isEqualTo(AutomatonState.TransitionType.BACK_REFERENCE);

    BackReferenceTree backReferenceTree = (BackReferenceTree) tree;
    assertThat(backReferenceTree.isNumerical()).isTrue();
    assertThat(backReferenceTree.groupNumber()).isEqualTo(expectedGroupNumber);
    assertThat(backReferenceTree.isNamedGroup()).isFalse();
  }

