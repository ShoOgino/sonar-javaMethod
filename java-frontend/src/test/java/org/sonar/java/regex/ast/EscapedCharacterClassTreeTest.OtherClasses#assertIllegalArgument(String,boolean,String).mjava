    private void assertIllegalArgument(String regex, boolean includesProperty, String message) {
      RegexSource source = makeSource(regex);
      RegexLexer lexer = new RegexLexer(source);
      JavaCharacter backslash = lexer.getCurrent();
      lexer.moveNext();
      JavaCharacter type = lexer.getCurrent();
      Executable createTree;
      if (includesProperty) {
        lexer.moveNext();
        JavaCharacter openingBrace = lexer.getCurrent();
        lexer.moveNext(2);
        JavaCharacter closingBrace = lexer.getCurrent();
        createTree = () -> new EscapedCharacterClassTree(source, backslash, type, openingBrace, closingBrace);
      } else {
        createTree = () -> new EscapedCharacterClassTree(source, backslash, type);
      }
      assertThrows(IllegalArgumentException.class, createTree, message);
    }

