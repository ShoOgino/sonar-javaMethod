  @Test
  void testFlags() {
    RegexTree regex = assertSuccessfulParse("a (?x:b c) d");
    SequenceTree seq = assertType(SequenceTree.class, regex);
    assertListElements(seq.getItems(),
      first -> assertCharacter('a', first),
      second -> assertCharacter(' ', second),
      third -> {
        NonCapturingGroupTree group = assertType(NonCapturingGroupTree.class, third);
        assertNotNull(group.getGroupHeader());
        assertToken(2, "(?x:", group.getGroupHeader());
        assertEquals(Pattern.COMMENTS, group.getEnabledFlags().getMask());
        RegexTree element = group.getElement();
        assertNotNull(element, "Group should have a body.");
        assertPlainString("bc", element);
      },
      fourth -> assertCharacter(' ', fourth),
      fifth -> assertCharacter('d', fifth)
    );
  }

