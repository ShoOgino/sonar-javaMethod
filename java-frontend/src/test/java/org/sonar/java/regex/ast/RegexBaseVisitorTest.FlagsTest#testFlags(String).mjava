    private void testFlags(String regex) {
      FlagChecker visitor = new FlagChecker();
      visitor.visit(RegexParserTestUtils.assertSuccessfulParseResult(regex));
      assertThat(visitor.visitedCharacters()).isEqualTo("abcdefghi");
      JavaCharacter iFlag = visitor.getJavaCharacterForFlag(Pattern.CASE_INSENSITIVE);
      assertThat(iFlag).isNotNull();
      assertThat(iFlag.getCharacter()).isEqualTo('i');
      assertThat(visitor.getActiveFlags()).isEqualTo(Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CHARACTER_CLASS);
      JavaCharacter uFlag = visitor.getJavaCharacterForFlag(Pattern.UNICODE_CASE);
      assertThat(uFlag).isNull();
    }

