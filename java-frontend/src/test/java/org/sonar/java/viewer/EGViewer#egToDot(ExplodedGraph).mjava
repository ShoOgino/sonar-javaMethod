  private static String egToDot(ExplodedGraph eg) {
    String result = "graph ExplodedGraph { ";
    List<ExplodedGraph.Node> nodes = new ArrayList<>(eg.getNodes().keySet());
    int index = 0;
    for (ExplodedGraph.Node node : nodes) {
      List<ExplodedGraph.Node> parents = Lists.newArrayList(node.getParents());
      result += graphNode(index, node, parents);
      if (!parents.isEmpty()) {
        ExplodedGraph.Node firstParent = node.parent();
        result += parentEdge(nodes.indexOf(firstParent), index, node, firstParent);

        int nbParents = parents.size();
        if (SHOW_CACHE && nbParents > 1) {
          List<ExplodedGraph.Node> cacheHits = parents.subList(1, nbParents);
          for (ExplodedGraph.Node cacheHit : cacheHits) {
            result += cacheEdge(nodes.indexOf(cacheHit), index, node, cacheHit);
          }
        }
      }
      index++;
    }
    return result + "}";

  }

