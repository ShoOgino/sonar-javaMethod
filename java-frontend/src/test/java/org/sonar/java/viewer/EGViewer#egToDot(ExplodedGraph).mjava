  private static String egToDot(ExplodedGraph eg) {
    String result = "graph ExplodedGraph { ";
    List<ExplodedGraph.Node> nodes = new ArrayList<>(eg.getNodes().keySet());
    int index = 0;
    for (ExplodedGraph.Node node : nodes) {
      result += graphNode(index, node);
      if (!node.parents.isEmpty()) {
        ExplodedGraph.Node firstParent = node.parents.get(0);
        result += parentEdge(nodes.indexOf(firstParent), index, node, firstParent);

        if (SHOW_CACHE && node.parents.size() > 1) {
          List<ExplodedGraph.Node> cacheHits = node.parents.subList(1, node.parents.size());
          for (ExplodedGraph.Node cacheHit : cacheHits) {
            result += cacheEdge(nodes.indexOf(cacheHit), index, cacheHit);
          }
        }
      }
      index++;
    }
    return result + "}";

  }

