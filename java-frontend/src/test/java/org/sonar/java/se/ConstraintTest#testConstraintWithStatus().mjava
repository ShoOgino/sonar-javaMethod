  @Test
  public void testConstraintWithStatus() {
    ProgramState state = ProgramState.EMPTY_STATE;
    final SymbolicValue sv3 = new SymbolicValue(3);
    SymbolicValue sv4 = new SymbolicValue(4) {
      public SymbolicValue wrappedValue() {
        return sv3;
      }
    };
    ObjectConstraint<TestStatus> constraint = new ObjectConstraint<>(TestStatus.OPENED);
    assertThat(state.getConstraintWithStatus(sv4, TestStatus.OPENED)).isNull();
    state = state.addConstraint(sv3, constraint);
    assertThat(state.getConstraintWithStatus(sv4, TestStatus.OPENED)).isEqualTo(constraint);
    assertThat(state.getConstraintWithStatus(sv4, TestStatus.CLOSED)).isNull();
  }

