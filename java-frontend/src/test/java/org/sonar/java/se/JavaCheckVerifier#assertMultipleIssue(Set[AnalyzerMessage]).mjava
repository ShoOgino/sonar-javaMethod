  private void assertMultipleIssue(Set<AnalyzerMessage> issues) throws AssertionError {
    if (issues.isEmpty()) {
      Fail.fail("At least one issue expected");
    }
    List<Integer> unexpectedLines = Lists.newLinkedList();
    Multimap<Integer, Expectations.Issue> expected = expectations.issues;

    for (AnalyzerMessage issue : issues) {
      validateIssue(expected, unexpectedLines, issue);
    }
    if (!expected.isEmpty() || !unexpectedLines.isEmpty()) {
      Collections.sort(unexpectedLines);
      List<Integer> expectedLines = expected.keys().stream().sorted().collect(Collectors.toList());
      String expectedMsg = !expectedLines.isEmpty() ? ("Expected at " + expectedLines) : "";
      String unexpectedMsg = !unexpectedLines.isEmpty() ? ((expectedMsg.isEmpty() ? "" : ", ") + "Unexpected at " + unexpectedLines) : "";
      fail(expectedMsg + unexpectedMsg);
    }
    assertSuperfluousFlows();
  }

