  @Test
  public void test_equals() {
    MethodBehavior mb = mockMethodBehavior(1, false);

    HappyPathYield yield = new HappyPathYield(mb);
    HappyPathYield otherYield = new HappyPathYield(mb);

    assertThat(yield).isNotEqualTo(null);
    assertThat(yield).isEqualTo(yield);
    assertThat(yield).isEqualTo(otherYield);

    // same arity and constraints but different return value
    otherYield.setResult(0, yield.resultConstraint());
    assertThat(yield).isNotEqualTo(otherYield);

    // same arity but different return constraint
    otherYield = new HappyPathYield(mb);
    otherYield.setResult(yield.resultIndex(), ObjectConstraint.notNull());
    assertThat(yield).isNotEqualTo(otherYield);

    // same return constraint
    yield.setResult(-1, ObjectConstraint.notNull());
    otherYield = new HappyPathYield(mb);
    otherYield.setResult(-1, ObjectConstraint.notNull());
    assertThat(yield).isEqualTo(otherYield);

    // same arity and parameters but exceptional yield
    assertThat(yield).isNotEqualTo(new ExceptionalYield(mb));
  }

