  private void validateFlowAttributes(List<AnalyzerMessage> actual, String flowId) {
    SortedSet<Expectations.FlowComment> expected = expectations.flows.get(flowId);

    validateFlowMessages(actual, flowId, expected);

    Iterator<AnalyzerMessage> actualIterator = actual.iterator();
    Iterator<Expectations.FlowComment> expectedIterator = expected.iterator();
    while (actualIterator.hasNext() && expectedIterator.hasNext()) {
      AnalyzerMessage.TextSpan flowLocation = actualIterator.next().primaryLocation();
      assertThat(flowLocation).isNotNull();
      Expectations.FlowComment flowComment = expectedIterator.next();
      validateLocation(flowComment.attributes, flowLocation);
    }
  }

