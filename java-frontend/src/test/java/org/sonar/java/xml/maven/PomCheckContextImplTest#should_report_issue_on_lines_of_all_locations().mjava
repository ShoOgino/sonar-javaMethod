  @Test
  public void should_report_issue_on_lines_of_all_locations() {
    ArrayList<Location> secondaries = new ArrayList<Location>();

    // secondary on located tree
    int secondary1Line = 42;
    int secondary1Column = 3;
    int secondary1Size = 5;
    String msg1 = "msg1";
    secondaries.add(new Location(msg1, fakeLocatedTree(secondary1Line, secondary1Column, secondary1Size)));

    // secondary on located tree with unknown column
    int secondary2Line = 43;
    String msg2 = "msg2";
    secondaries.add(new Location(msg2, fakeLocatedTreeWithUnknownColumn(secondary2Line)));

    String msg = "message";
    context.reportIssue(CHECK, LINE, msg, secondaries);

    String expected = "analyzerMessage:" + msg;
    expected += ";" + msg1 + "[" + secondary1Line + ";" + (secondary1Column - 1) + "/" + secondary1Line + ";" + (secondary1Column + secondary1Size - 1) + "]";
    expected += ";" + msg2 + "[" + secondary2Line + ";0/" + secondary2Line + ";0]";

    assertThat(reportedMessage).isEqualTo(expected);
  }

