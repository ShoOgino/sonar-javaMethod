  @Test
  public void ucfg_activation_should_rely_on_active_rules() {
    File file = new File("src/test/files/ParseError.java");
    SensorContextTester sensorContext = SensorContextTester.create(file.getParentFile().getAbsoluteFile());
    SonarComponents sonarComponents = new SonarComponents(null, null, null, null, null);
    sonarComponents.setSensorContext(sensorContext);
    assertThat(sonarComponents.shouldGenerateUCFG()).isFalse();
    ActiveRules activeRules = new ActiveRulesBuilder().create(RuleKey.of("SonarSecurityJava", "S3649")).activate().build();
    sensorContext.setActiveRules(activeRules);
    assertThat(sonarComponents.shouldGenerateUCFG()).isTrue();
  }

