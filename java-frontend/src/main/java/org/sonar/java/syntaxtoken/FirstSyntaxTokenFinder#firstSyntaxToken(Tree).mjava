  @Nullable
  public static SyntaxToken firstSyntaxToken(@Nullable Tree tree) {
    if (tree == null || tree.is(Tree.Kind.INFERED_TYPE)) {
      return null;
    } else if (tree.is(Tree.Kind.TOKEN)) {
      return (SyntaxToken) tree;
    }
    if(tree.is(Tree.Kind.METHOD_INVOCATION)) {
      MethodInvocationTree mit = (MethodInvocationTree) tree;
      if(mit.typeArguments() !=null && mit.methodSelect().is(Tree.Kind.MEMBER_SELECT)) {
        SyntaxToken syntaxToken = firstSyntaxToken(((MemberSelectExpressionTree) mit.methodSelect()).expression());
        if (syntaxToken != null) {
          return syntaxToken;
        }
      }
    }
    for (Tree next : ((JavaTree) tree).children()) {
      SyntaxToken syntaxToken = firstSyntaxToken(next);
      if (syntaxToken != null) {
        return syntaxToken;
      }
    }
    return null;
  }

