  public ProgramState addConstraint(SymbolicValue symbolicValue, Constraint constraint) {
    PMap<Class<? extends Constraint>, Constraint> constraintsForSV = constraints.get(symbolicValue);
    if(constraintsForSV == null) {
      constraintsForSV = PCollections.emptyMap();
    }
    return addConstraints(symbolicValue, constraintsForSV.put(constraint.getClass(), constraint));
  }

