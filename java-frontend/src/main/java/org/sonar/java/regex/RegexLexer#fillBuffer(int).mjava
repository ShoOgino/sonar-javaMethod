  private void fillBuffer(int size) {
    if (freeSpacingMode) {
      skipCommentsAndWhiteSpace();
    }
    while (buffer.size() < size && characters.isNotAtEnd()) {
      JavaCharacter javaCharacter = characters.getCurrent();
      consumeCharacter();
      buffer.add(javaCharacter);
      if (freeSpacingMode) {
        skipCommentsAndWhiteSpace();
      }
    }
  }

