  public JavaType resolveTypeSubstitutionWithDiamondOperator(ParametrizedTypeJavaType type, JavaType definition) {
    ParametrizedTypeJavaType result = type;
    if (definition.isParameterized()) {
      TypeSubstitution substitution = TypeSubstitutionSolver.substitutionFromSuperType(type, (ParametrizedTypeJavaType) definition);
      result = (ParametrizedTypeJavaType) typeSubstitutionSolver.applySubstitution(type, substitution);
    }
    return typeSubstitutionSolver.erasureSubstitution(result);
  }

