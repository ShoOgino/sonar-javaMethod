  @Override
  public void visitForEachStatement(ForEachStatement tree) {
    scan(tree.variable());
    scan(tree.expression());
    TypeTree typeTree = tree.variable().type();
    if (typeTree.is(Tree.Kind.VAR_TYPE)) {
      JavaType iteratedObjectType = getIteratedObjectType((JavaType) tree.expression().symbolType());
      setInferedType(upwardProjection(iteratedObjectType), (DeferredType) typeTree.symbolType());
    }
    // scan the body only after handling type of variable
    scan(tree.statement());
  }

