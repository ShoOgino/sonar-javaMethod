  @Nullable
  private byte[] bytesForClass(String fullname) {
    InputStream is = inputStreamFor(fullname);
    if (is == null) {
      return null;
    }
    try {
      byte[] bytes = ByteStreams.toByteArray(is);
      // to read bytecode with ASM not supporting Java 9, we will set major version to Java 8
      if (Java9Support.isJava9Class(bytes)) {
        Java9Support.setJava8MajorVersion(bytes);
      }
      return bytes;
    } catch (IOException e) {
      throw Throwables.propagate(e);
    } finally {
      Closeables.closeQuietly(is);
    }
  }

