  public static XmlLocation getStartLocation(String text, javax.xml.stream.Location endLocation) {
    int length = text.length();
    int offset = endLocation.getCharacterOffset() - length;
    int numberLines = (text.split("\\r?\\n")).length - 1;
    if (numberLines > 0) {
      return new XmlLocation(endLocation.getLineNumber() - numberLines, offset);
    }
    return new XmlLocation(endLocation.getLineNumber(), endLocation.getColumnNumber() - length, offset);
  }

